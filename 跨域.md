# 什么是跨域

浏览器最基础的安全规则就是《同源策略》，同源策略保障网站数据的安全性，1995年，同源政策由 Netscape 公司引入浏览器。目前，所有浏览器都实行这个政策。

# 同源
协议相同（http 和 https）
域名相同（www.xxxx.com）
端口相同（默认是80）

# 同源策略的限制
1、限制cookie、localStorage、sessionStorage不能跨域访问
2、DOM无法跨域操作
3、ajax不能跨域访问

# 如何突破同源策略的限制进行ajax的请求
## 1、使用JSONP模拟Ajax请求
浏览器只是限制了ajax的请求，并没有限制其他请求，而JSONP是利用script请求模拟的ajax请求，在生成script标签的同时生成一个全局函数，将函数名字通过url地址的callback参数传递到后端，后端接收到请求，发现有callback参数得知是jsonp请求，修改返回的值，变成js的执行函数，并且将内容作为函数的参数，浏览器接受到返回的内容，发现是JavaScript会立即执行，那么返回的这个内容就执行了，对应的函数的到对应的参数（数据），利用这种方式突破了ajax跨域访问的限制

优点：
1、突破了ajax的跨域限制
2、可以通过js回调的形式接受到返回值
3、兼容性好

确定：
1、只能是get请求，因为他不是ajax是文件请求，所以无法模拟除了get以外的其他请求
2、传递的参数也只能是通过query进行传递
3、无法捕获错误状态
4、需要前后端同时配合

## 2、使用服务代理的方式突破浏览的限制
因为同源策略是浏览器的安全规则和服务器没有关系，而服务器和服务器之间是没有跨域影响的，而代理其实就是，先通过当前的客户端向当前不跨域的服务端发生请求，当前不跨域的服务端，在发生一个跨域的请求，拿到返回值，在返回给当前的客户端，代理分为正向代理和反向代理


## 3、使用cors允许浏览器跨域访问
CORS是一个W3C标准，全称是"跨域资源共享"，它允许浏览器向跨源服务器，发出XMLHttpRequest请求，从而克服了AJAX只能同源使用的限制。

优点：
前端不需要做任何改动，服务设置一个允许请求的字段即可
支持所有的请求方法

缺点：
如果设置不当，设置成了*那么就意味着任何人都有跨域访问我们的数据了
浏览器的兼容性不太好